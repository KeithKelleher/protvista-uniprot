{"version":3,"file":"protvista-uniprot.js","sources":["../src/categories.js","../src/main.js"],"sourcesContent":["   export const categories = [{\n                \"name\": \"DOMAINS_AND_SITES\",\n                \"label\": \"Domains & sites\",\n                \"component\": \"protvista-track\",\n                \"tracks\": [{\n                        \"name\": \"domain\",\n                        \"label\": \"Domain\",\n                        \"tooltip\": \"Specific combination of secondary structures organized into a characteristic three-dimensional structure or fold\"\n                    }, {\n                        \"name\": \"region\",\n                        \"label\": \"Region\",\n                        \"tooltip\": \"Regions in multifunctional enzymes or fusion proteins, or characteristics of a region, e.g., protein-protein interactions mediation\"\n                    }, {\n                        \"name\": \"motif\",\n                        \"label\": \"Motif\",\n                        \"tooltip\": \"Short conserved sequence motif of biological significance\"\n                    }, {\n                        \"name\": \"metal\",\n                        \"label\": \"Metal binding\",\n                        \"tooltip\": \"Binding site for a metal ion\"\n                    }, {\n                        \"name\": \"site\",\n                        \"label\": \"Site\",\n                        \"tooltip\": \"Any interesting single amino acid site on the sequence\"\n                    }\n\n                ]\n            },\n            {\n                \"name\": \"MOLECULE_PROCESSING\",\n                \"label\": \"Molecule processing\",\n                \"component\": \"protvista-track\",\n                \"tracks\": [{\n                    \"name\": \"signal\",\n                    \"label\": \"Signal peptide\",\n                    \"tooltip\": \"N-terminal signal peptide\"\n                }, {\n                    \"name\": \"chain\",\n                    \"label\": \"Chain\",\n                    \"tooltip\": \"(aka mature region). This describes the extent of a polypeptide chain in the mature protein following processing\"\n                }, {\n                    \"name\": \"peptide\",\n                    \"label\": \"Peptide\",\n                    \"tooltip\": \"The position and length of an active peptide in the mature protein\"\n                }]\n            },\n            {\n                \"name\": \"PTM\",\n                \"label\": \"PTM\",\n                \"component\": \"protvista-track\",\n                \"tracks\": [{\n                    \"name\": \"mod_res\",\n                    \"label\": \"Modified residue\",\n                    \"tooltip\": \"Modified residues such as phosphorylation, acetylation, acylation, methylation\"\n                }, {\n                    \"name\": \"carbohyd\",\n                    \"label\": \"Glycosylation\",\n                    \"tooltip\": \"Covalently attached glycan group(s)\"\n                }, {\n                    \"name\": \"disulfid\",\n                    \"label\": \"Disulfide bond\",\n                    \"tooltip\": \"The positions of cysteine residues participating in disulphide bonds\"\n                }, {\n                    \"name\": \"crosslnk\",\n                    \"label\": \"Cross-link\",\n                    \"tooltip\": \"Covalent linkages of various types formed between two proteins or between two parts of the same protein\"\n                }]\n            },\n            {\n                \"name\": \"SEQUENCE_INFORMATION\",\n                \"label\": \"Sequence information\",\n                \"component\": \"protvista-track\",\n                \"tracks\": [{\n                    \"name\": \"compbias\",\n                    \"label\": \"Compositional bias\",\n                    \"tooltip\": \"Position of regions of compositional bias within the protein and the particular amino acids that are over-represented within those regions\"\n                }, {\n                    \"name\": \"conflict\",\n                    \"label\": \"Sequence conflict\",\n                    \"tooltip\": \"Sequence discrepancies of unknown origin\"\n                }]\n            },\n            {\n                \"name\": \"STRUCTURAL\",\n                \"label\": \"Structural features\",\n                \"component\": \"protvista-track\",\n                \"tracks\": [{\n                    \"name\": \"helix\",\n                    \"label\": \"Helix\",\n                    \"tooltip\": \"The positions of experimentally determined helical regions\"\n                }, {\n                    \"name\": \"strand\",\n                    \"label\": \"Beta strand\",\n                    \"tooltip\": \"The positions of experimentally determined beta strands\"\n                }, {\n                    \"name\": \"turn\",\n                    \"label\": \"Turn\",\n                    \"tooltip\": \"The positions of experimentally determined hydrogen-bonded turns\"\n                }, {\n                    \"name\": \"coiled\",\n                    \"label\": \"Coiled coil\",\n                    \"tooltip\": \"Coiled coils are built by two or more alpha-helices that wind around each other to form a supercoil\"\n                }]\n            },\n            {\n                \"name\": \"TOPOLOGY\",\n                \"label\": \"Topology\",\n                \"component\": \"protvista-track\",\n                \"tracks\": [{\n                    \"name\": \"topo_dom\",\n                    \"label\": \"Topological domain\",\n                    \"tooltip\": \"Location of non-membrane regions of membrane-spanning proteins\"\n                }, {\n                    \"name\": \"transmem\",\n                    \"label\": \"Transmembrane\",\n                    \"tooltip\": \"Extent of a membrane-spanning region\"\n                }, {\n                    \"name\": \"intramem\",\n                    \"label\": \"Intramembrane\",\n                    \"tooltip\": \"Extent of a region located in a membrane without crossing it\"\n                }]\n            },\n            {\n                \"name\": \"MUTAGENESIS\",\n                \"label\": \"Mutagenesis\",\n                \"component\": \"protvista-track\",\n                \"tracks\": [{\n                    \"name\": \"mutagen\",\n                    \"label\": \"Mutagenesis\",\n                    \"tooltip\": \"Site which has been experimentally altered by mutagenesis\"\n                }]\n            },\n            {\n                \"name\": \"PROTEOMICS\",\n                \"label\": \"Proteomics\",\n                \"component\": \"protvista-track\",\n                \"tracks\": [{\n                    \"name\": \"unique\",\n                    \"label\": \"Unique peptide\",\n                    \"tooltip\": \"\"\n                }, {\n                    \"name\": \"non_unique\",\n                    \"label\": \"Non-unique peptide\",\n                    \"tooltip\": \"\"\n                }]\n            },\n            {\n                \"name\": \"ANTIGEN\",\n                \"label\": \"Antigenic sequences\",\n                \"component\": \"protvista-track\",\n                \"tracks\": [{\n                    \"name\": \"antigen\",\n                    \"label\": \"Antibody binding sequences\",\n                    \"tooltip\": \"\"\n                }]\n            },\n            {\n                \"name\": \"VARIATION\",\n                \"label\": \"Variants\",\n                \"component\": \"protvista-variant\",\n                \"tracks\" : []\n            }\n        ];\n        // \"trackNames\": {\n        //     \"transit\": {\n        //         \"label\": \"Transit peptide\",\n        //         \"tooltip\": \"This describes the extent of a transit peptide\"\n        //     },\n        //     \"init_met\": {\n        //         \"label\": \"Initiator methionine\",\n        //         \"tooltip\": \"This indicates that the initiator methionine is cleaved from the mature protein\"\n        //     },\n        //     \"propep\": {\n        //         \"label\": \"Propeptide\",\n        //         \"tooltip\": \"Part of a protein that is cleaved during maturation or activation\"\n        //     },\n        //     \"repeat\": {\n        //         \"label\": \"Repeat\",\n        //         \"tooltip\": \"Repeated sequence motifs or repeated domains within the protein\"\n        //     },\n        //     \"ca_bind\": {\n        //         \"label\": \"Calcium binding\",\n        //         \"tooltip\": \"Calcium-binding regions, such as the EF-hand motif\"\n        //     },\n        //     \"dna_bind\": {\n        //         \"label\": \"DNA binding\",\n        //         \"tooltip\": \"DNA-binding domains such as AP2/ERF domain, the ETS domain, the Fork-Head domain, the HMG box and the Myb domain\"\n        //     },\n        //     \"zn_fing\": {\n        //         \"label\": \"Zinc finger\",\n        //         \"tooltip\": \"Small, functional, independently folded domain that coordinates one or more zinc ions\"\n        //     },\n        //     \"np_bind\": {\n        //         \"label\": \"Nucleotide binding\",\n        //         \"tooltip\": \"(aka flavin-binding). Region in the protein which binds nucleotide phosphates\"\n        //     },\n        //     \"binding\": {\n        //         \"label\": \"Binding site\",\n        //         \"tooltip\": \"Binding site for any chemical group (co-enzyme, prosthetic group, etc.)\"\n        //     },\n        //     \"act_site\": {\n        //         \"label\": \"Active site\",\n        //         \"tooltip\": \"Amino acid(s) directly involved in the activity of an enzyme\"\n        //     },\n        //     \"lipid\": {\n        //         \"label\": \"Lipidation\",\n        //         \"tooltip\": \"Covalently attached lipid group(s)\"\n        //     },\n        //     \"non_cons\": {\n        //         \"label\": \"Non-adjacent residues\",\n        //         \"tooltip\": \"Indicates that two residues in a sequence are not consecutive and that there is an undetermined number of unsequenced residues between them\"\n        //     },\n        //     \"non_ter\": {\n        //         \"label\": \"Non-terminal residue\",\n        //         \"tooltip\": \"The sequence is incomplete. The residue is not the terminal residue of the complete protein\"\n        //     },\n        //     \"unsure\": {\n        //         \"label\": \"Sequence uncertainty\",\n        //         \"tooltip\": \"Regions of a sequence for which the authors are unsure about the sequence assignment\"\n        //     },\n        //     \"non_std\": {\n        //         \"label\": \"Non-standard residue\",\n        //         \"tooltip\": \"Non-standard amino acids (selenocysteine and pyrrolysine)\"\n        //     },\n        //     \"variant\": {\n        //         \"label\": \"Natural variant\",\n        //         \"tooltip\": \"Natural variant of the protein, including polymorphisms, variations between strains, isolates or cultivars, disease-associated mutations and RNA editing events\"\n        //     },","import {\n    categories\n} from './categories';\n\nconst loadComponent = function () {\n    class ProtvistaUniprot extends HTMLElement {\n\n        constructor() {\n            super();\n            this._accession = this.getAttribute('accession');\n            // get properties here\n        }\n\n        connectedCallback() {\n            this.loadEntry(this._accession).then(entryData => {\n                this._sequenceLength = entryData.sequence.sequence.length;\n                // We need to get the length of the protein before rendering it\n                this.render();\n            })\n        }\n\n        async loadEntry(accession) {\n            try {\n                return await (await fetch(`https://www.ebi.ac.uk/proteins/api/proteins/${accession}`)).json();\n            } catch (e) {\n                console.log(`Couldn't load UniProt entry`, e);\n            }\n        }\n\n        render() {\n            let html = `\n            <protvista-manager attributes=\"length displaystart displayend highlightstart highlightend variantfilters\">\n                <protvista-navigation length=\"${this._sequenceLength}\"></protvista-navigation>\n                <protvista-sequence length=\"${this._sequenceLength}\"></protvista-sequence>\n                ${categories.map(category => \n                    `\n                        <div class=\"\">${category.label}</div>\n                        ${category.tracks.map(track => `<div class=\"\">${track.label}</div><div>${this.getTrack()}</div>`).join('')}\n                    `\n                ).join('')}\n                <protvista-sequence id=\"seq1\" length=\"${this._sequenceLength}\"></protvista-sequence>\n            </protvista-manager>\n            `;\n            this.innerHTML = html;\n        }\n\n        getTrack() {\n            return `      \n            <protvista-track id=\"track1\" length=\"${this._sequenceLength}\">\n                <protvista-feature-adapter>\n                <uniprot-entry-data-loader accession=\"${this._accession}\">\n                    <source src=\"https://www.ebi.ac.uk/proteins/api/features/{0}?categories=PTM\" />\n                </uniprot-entry-data-loader>\n                </protvista-feature-adapter>\n                <data-loader data-key=\"config\">\n                    <source src=\"https://cdn.jsdelivr.net/npm/protvista-track/dist/config.json\">\n                </data-loader>\n            </protvista-track>\n            `;\n        }\n\n    }\n    customElements.define('protvista-uniprot', ProtvistaUniprot);\n};\n\n// Conditional loading of polyfill\nif (window.customElements) {\n    loadComponent();\n} else {\n    document.addEventListener('WebComponentsReady', function () {\n        loadComponent();\n    });\n}"],"names":["categories","loadComponent","ProtvistaUniprot","_accession","getAttribute","loadEntry","then","_sequenceLength","entryData","sequence","length","render","accession","fetch","json","log","html","map","category","label","tracks","track","getTrack","join","innerHTML","HTMLElement","define","window","customElements","addEventListener"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAU,IAAMA,aAAa,CAAC;YACN,mBADM;aAEL,iBAFK;iBAGD,iBAHC;cAIJ,CAAC;gBACK,QADL;iBAEM,QAFN;mBAGQ;KAHT,EAIH;gBACS,QADT;iBAEU,QAFV;mBAGY;KAPT,EAQH;gBACS,OADT;iBAEU,OAFV;mBAGY;KAXT,EAYH;gBACS,OADT;iBAEU,eAFV;mBAGY;KAfT,EAgBH;gBACS,MADT;iBAEU,MAFV;mBAGY;KAnBT;CAJG,EA4BjB;YACY,qBADZ;aAEa,qBAFb;iBAGiB,iBAHjB;cAIc,CAAC;gBACC,QADD;iBAEE,gBAFF;mBAGI;KAHL,EAIP;gBACS,OADT;iBAEU,OAFV;mBAGY;KAPL,EAQP;gBACS,SADT;iBAEU,SAFV;mBAGY;KAXL;CAhCG,EA8CjB;YACY,KADZ;aAEa,KAFb;iBAGiB,iBAHjB;cAIc,CAAC;gBACC,SADD;iBAEE,kBAFF;mBAGI;KAHL,EAIP;gBACS,UADT;iBAEU,eAFV;mBAGY;KAPL,EAQP;gBACS,UADT;iBAEU,gBAFV;mBAGY;KAXL,EAYP;gBACS,UADT;iBAEU,YAFV;mBAGY;KAfL;CAlDG,EAoEjB;YACY,sBADZ;aAEa,sBAFb;iBAGiB,iBAHjB;cAIc,CAAC;gBACC,UADD;iBAEE,oBAFF;mBAGI;KAHL,EAIP;gBACS,UADT;iBAEU,mBAFV;mBAGY;KAPL;CAxEG,EAkFjB;YACY,YADZ;aAEa,qBAFb;iBAGiB,iBAHjB;cAIc,CAAC;gBACC,OADD;iBAEE,OAFF;mBAGI;KAHL,EAIP;gBACS,QADT;iBAEU,aAFV;mBAGY;KAPL,EAQP;gBACS,MADT;iBAEU,MAFV;mBAGY;KAXL,EAYP;gBACS,QADT;iBAEU,aAFV;mBAGY;KAfL;CAtFG,EAwGjB;YACY,UADZ;aAEa,UAFb;iBAGiB,iBAHjB;cAIc,CAAC;gBACC,UADD;iBAEE,oBAFF;mBAGI;KAHL,EAIP;gBACS,UADT;iBAEU,eAFV;mBAGY;KAPL,EAQP;gBACS,UADT;iBAEU,eAFV;mBAGY;KAXL;CA5GG,EA0HjB;YACY,aADZ;aAEa,aAFb;iBAGiB,iBAHjB;cAIc,CAAC;gBACC,SADD;iBAEE,aAFF;mBAGI;KAHL;CA9HG,EAoIjB;YACY,YADZ;aAEa,YAFb;iBAGiB,iBAHjB;cAIc,CAAC;gBACC,QADD;iBAEE,gBAFF;mBAGI;KAHL,EAIP;gBACS,YADT;iBAEU,oBAFV;mBAGY;KAPL;CAxIG,EAkJjB;YACY,SADZ;aAEa,qBAFb;iBAGiB,iBAHjB;cAIc,CAAC;gBACC,SADD;iBAEE,4BAFF;mBAGI;KAHL;CAtJG,EA4JjB;YACY,WADZ;aAEa,UAFb;iBAGiB,mBAHjB;cAIe;CAhKE,CAAnB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACIV,IAAMC,gBAAgB,SAAhBA,aAAgB,GAAY;QACxBC,gBADwB;;;oCAGZ;;;;;kBAELC,UAAL,GAAkB,MAAKC,YAAL,CAAkB,WAAlB,CAAlB;;;;;;;gDAIgB;;;qBACXC,SAAL,CAAe,KAAKF,UAApB,EAAgCG,IAAhC,CAAqC,qBAAa;2BACzCC,eAAL,GAAuBC,UAAUC,QAAV,CAAmBA,QAAnB,CAA4BC,MAAnD;;2BAEKC,MAAL;iBAHJ;;;;;mGAOYC,SAjBU;;;;;;;2CAmBEC,uDAAqDD,SAArD,CAnBF;;;;yDAmBqEE,IAnBrE;;;;;;;;;4CAqBVC,GAAR;;;;;;;;;;;;;;;;;;qCAIC;;;oBACDC,oLAEgC,KAAKT,eAFrC,+EAG8B,KAAKA,eAHnC,iDAIEP,WAAWiB,GAAX,CAAe;wEAEOC,SAASC,KAFhB,wCAGPD,SAASE,MAAT,CAAgBH,GAAhB,CAAoB;kDAA0BI,MAAMF,KAAhC,mBAAmD,OAAKG,QAAL,EAAnD;qBAApB,EAAgGC,IAAhG,CAAqG,EAArG,CAHO;iBAAf,EAKAA,IALA,CAKK,EALL,CAJF,gEAUwC,KAAKhB,eAV7C,4EAAJ;qBAaKiB,SAAL,GAAiBR,IAAjB;;;;uCAGO;qFAEgC,KAAKT,eAD5C,+GAG4C,KAAKJ,UAHjD;;;;MA1CuBsB,WADD;;mBA0DfC,MAAf,CAAsB,mBAAtB,EAA2CxB,gBAA3C;CA1DJ;;;AA8DA,IAAIyB,OAAOC,cAAX,EAA2B;;CAA3B,MAEO;aACMC,gBAAT,CAA0B,oBAA1B,EAAgD,YAAY;;KAA5D;;;;;"}